<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <link href="Content/Site.css" rel="stylesheet" />
</head>
<body>
    <script>
        (function () {

            var formJsonObj;

            $.ajax({
                contentType: 'application/json; charset=utf-8',
                type: "GET",
                url: "/api/values",
                dataType: 'json',

                success: function (data, textStatus, jqXHR) {
                    console.log(data);
                    console.log('Header', data.Form.Header);
                    console.log('Body', data.Form.Sections);
                    CreateHeader(data.Form.Header);
                    CreateBody(data.Form.Sections[0]);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown);
                }
            });

            function CreateHeader(header) {

               var headerDiv = $('<div>').attr({id: "header-div", class: "header-title-Banner"})
                $('<p>').attr({class: "header-title"}).text(header.Title).appendTo(headerDiv);
                $('<img />')
                        .attr('src', "Content/Images/logo.png")         
                        .attr('title', "Banner")
                        .attr('alt', "eSignature image")
                        .attr('class', "img-Banner")
                        .width('113px').height('80px')
                        .appendTo(headerDiv);
                headerDiv.appendTo($('body'));


                if (header.Description !== null && header.Description.length > 0)
                {
                   var description = $('<ul>').appendTo($('body'));
                    $.each(header.Description, function (index, value) {
                        $('<li>').attr({class : "h1"}).text(value.Line).appendTo(description);
                    });               
                }
                $('<label>').attr({ for: 'TextBox_id' }).text("Labelss").appendTo($('body'));
            }

            function CreateBody(body) {
                var tables = body.Tables;
                if (tables !== null && tables.length > 0) 
                {
                    $.each(tables, function (index, table) {
                        // console.log(table);
                        var tableContent = $('<table>').attr({ class: "table-content" }).appendTo($('body'));

                        var tableHead = $('<tr>').attr({ class: "table-head" }).appendTo(tableContent);
                        $('<th>').attr({ class: "table-head" }).text('Table Header').appendTo(tableHead);
                        $('<th>').attr({ class: "table-head" }).text('Table Header').appendTo(tableHead);
                        $('<th>').attr({ class: "table-head" }).text('Table Header').appendTo(tableHead);

                        $('<p>').text(table.Title).appendTo(tableContent);

                        $.each(table.Rows, function (index, row) {
                            var tableRow = $('<tr>').attr({ class: "table-row" }).appendTo($('body'));
                            tableRow.appendTo(tableContent);
                            console.log(row);
                            

                            if (row !== null && row.length >= 1) {

                            $.each(row, function (i, cell) {
                                var parentCell = $('<input>').attr({ type: 'text', id: row.Id, value: row[i].Name }).text(row[i].Name).appendTo(tableRow);
                                    if (cell !== null && cell !== undefined && cell.length > 0) {
                                        $('<input>').attr({ type: 'text', id: cell.Id, value: cell[i].Name }).text(cell[i].Name).appendTo(parentCell);
                                    }
                                });
                            }
                        });
                    });
                }
            }


        })();
    </script>
</body>
</html>
